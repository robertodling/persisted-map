!function(a,b,c){"use strict";var d={global:a};b(d,d.persistedItem={}),c(d,a.persistedMap=d.persistedMap={})}(this,function(a,b){"use strict";function c(a){return JSON.stringify(a)}function d(a){return JSON.parse(a)}function e(a){return j[a+"Storage"]}function f(a){return!!e(a)}function g(a,b){var c=e(a);return d(c.getItem(b))||{}}function h(a,b,d){var f=e(a);f.setItem(b,c(d))}function i(a,b){var c=e(a);c.removeItem(b)}var j=a.global,k={init:function(a,b){this.strategy=a,this.key=b},retrieve:function(){return g(this.strategy,this.key)},store:function(a){h(this.strategy,this.key,a)},clear:function(){i(this.strategy,this.key)}};b.create=function(a,b){if(f(a)){var c=Object.create(k);return c.init(a,b),c}}},function(a,b){"use strict";function c(a){return a&&a.expiry&&a.expiry<Date.now()}function d(a,b){return{expiry:Date.now()+b,value:a}}var e=a.persistedItem,f={init:function(a,b){this.peristedItem=a,this.expiry=b},put:function(a,b,c){c=c||this.expiry;var e=this.peristedItem.retrieve();e[a]=d(b,c),this.peristedItem.store(e)},get:function(a){var b=this.peristedItem.retrieve(),d=b[a];return c(d)?void this.remove(a):d&&d.value},size:function(){return this.keys().length},remove:function(a){var b=this.peristedItem.retrieve();delete b[a],this.peristedItem.store(b)},clear:function(){this.peristedItem.clear()},keys:function(){var a=this.peristedItem.retrieve();return Object.keys(a)}};b.create=function(a,b,c){var d,g;if(!a)throw new Error("You must provide key.");if(g=e.create(b||"local",a),!g)throw new Error('Web storage "'+b+'" is not supported.');return d=Object.create(f),d.init(g,c),d}});